{% extends "admin/base_site.html" %}
{% load i18n static %}
{% block title %}{{ title }}{% endblock %}
{% block extrahead %}
{{ block.super }}
<style>
    @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
    body {
        background: linear-gradient(180deg, #ff71ce 0%, #01cdfe 50%, #05ffa1 100%);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
    }
    body::before {
        content: '';
        position: fixed; top: 0; left: 0; right: 0; bottom: 0;
        background: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        opacity: 0.05;
        pointer-events: none;
    }
    #container { background: transparent; }
    #content { padding: 0; }
    .vapor-wrapper { max-width: 650px; margin: 40px auto; padding: 0 24px; position: relative; z-index: 1; }
    .vapor-header { text-align: center; margin-bottom: 40px; }
    .vapor-icon { font-size: 5rem; margin-bottom: 10px; filter: drop-shadow(0 0 20px rgba(255,113,206,0.8)); }
    .vapor-title {
        font-family: 'VT323', monospace;
        font-size: 3rem;
        background: linear-gradient(90deg, #ff71ce, #01cdfe, #05ffa1, #b967ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: none;
        letter-spacing: 0.3em;
    }
    .vapor-subtitle {
        font-family: 'VT323', monospace;
        font-size: 1.2rem;
        color: white;
        text-shadow: 2px 2px 0 #ff71ce, -2px -2px 0 #01cdfe;
        margin-top: 10px;
    }
    .vapor-card {
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(10px);
        border: 3px solid rgba(255,255,255,0.3);
        border-radius: 0;
        padding: 35px;
        position: relative;
    }
    .vapor-card::before {
        content: '';
        position: absolute; top: -3px; left: -3px; right: -3px; bottom: -3px;
        background: linear-gradient(45deg, #ff71ce, #01cdfe, #05ffa1, #b967ff);
        z-index: -1;
        animation: borderGlow 3s linear infinite;
    }
    @keyframes borderGlow {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    .vapor-label {
        font-family: 'VT323', monospace;
        font-size: 1.3rem;
        color: white;
        text-shadow: 2px 2px 0 #b967ff;
        margin-bottom: 15px;
    }
    .vapor-textarea {
        width: 100%; min-height: 180px; padding: 20px;
        font-family: 'VT323', monospace;
        font-size: 1.2rem; line-height: 1.6;
        color: #1a1a2e;
        background: rgba(255,255,255,0.9);
        border: none;
        resize: vertical; box-sizing: border-box;
    }
    .vapor-textarea:focus { outline: 3px solid #ff71ce; }
    .vapor-textarea::placeholder { color: #b967ff; }
    .vapor-actions { display: flex; gap: 20px; margin-top: 25px; justify-content: center; }
    .vapor-btn {
        padding: 15px 40px;
        font-family: 'VT323', monospace;
        font-size: 1.3rem;
        cursor: pointer;
        transition: all 0.3s;
        text-decoration: none;
        border: none;
        position: relative;
        overflow: hidden;
    }
    .vapor-btn-primary {
        background: linear-gradient(90deg, #ff71ce, #b967ff);
        color: white;
        text-shadow: 1px 1px 0 rgba(0,0,0,0.3);
    }
    .vapor-btn-primary:hover { transform: scale(1.05); box-shadow: 0 0 30px rgba(255,113,206,0.6); }
    .vapor-btn-secondary {
        background: rgba(255,255,255,0.2);
        color: white;
        border: 2px solid white;
    }
    .vapor-btn-secondary:hover { background: rgba(255,255,255,0.4); }
    .vapor-alert {
        padding: 15px 20px; margin-bottom: 20px;
        font-family: 'VT323', monospace;
        font-size: 1.1rem;
        text-align: center;
    }
    .vapor-alert-success { background: rgba(5,255,161,0.3); color: white; border: 2px solid #05ffa1; }
    .vapor-alert-error { background: rgba(255,113,206,0.3); color: white; border: 2px solid #ff71ce; }
    .vapor-history { margin-top: 40px; }
    .vapor-history-title {
        font-family: 'VT323', monospace;
        font-size: 1.5rem;
        color: white;
        text-align: center;
        text-shadow: 2px 2px 0 #01cdfe;
        margin-bottom: 20px;
    }
    .vapor-history-item {
        display: flex; align-items: center; gap: 15px;
        padding: 15px;
        background: rgba(255,255,255,0.1);
        margin-bottom: 10px;
        text-decoration: none;
        transition: all 0.3s;
        border-left: 4px solid #ff71ce;
    }
    .vapor-history-item:hover { background: rgba(255,255,255,0.25); transform: translateX(5px); }
    .vapor-status { font-size: 1.5rem; }
    .vapor-info { flex: 1; }
    .vapor-text { font-family: 'VT323', monospace; font-size: 1.1rem; color: white; }
    .vapor-meta { font-family: 'VT323', monospace; font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-top: 4px; }
    .floating { position: fixed; font-size: 3rem; opacity: 0.3; animation: float 6s ease-in-out infinite; z-index: 0; }
    @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-20px) rotate(10deg); } }
    .f1 { top: 10%; left: 5%; animation-delay: 0s; }
    .f2 { top: 30%; right: 8%; animation-delay: 1s; }
    .f3 { bottom: 20%; left: 10%; animation-delay: 2s; }
</style>
{% endblock %}
{% block content %}
<div class="floating f1">üóø</div>
<div class="floating f2">üå¥</div>
<div class="floating f3">üíø</div>
<div class="vapor-wrapper">
    {% if messages %}{% for message in messages %}<div class="vapor-alert vapor-alert-{{ message.tags }}">{{ message }}</div>{% endfor %}{% endif %}
    <div class="vapor-header">
        <div class="vapor-icon">üìº</div>
        <h1 class="vapor-title">Ôº≥Ôº≠Ôº≥„ÄÄÔº∑Ôº°Ôº∂Ôº•</h1>
        <p class="vapor-subtitle">ÔΩÅÔΩÖÔΩìÔΩîÔΩàÔΩÖÔΩîÔΩâÔΩÉ„ÄÄÔΩêÔΩíÔΩèÔΩÉÔΩÖÔΩìÔΩìÔΩâÔΩéÔΩá</p>
    </div>
    <div class="vapor-card">
        <form method="post" id="smsForm">
            {% csrf_token %}
            <div class="vapor-label">„Äê Ôº≠Ôº•Ôº≥Ôº≥Ôº°ÔºßÔº• „Äë</div>
            <textarea name="content" class="vapor-textarea" id="smsContent" placeholder="ÔΩêÔΩÅÔΩìÔΩîÔΩÖ„ÄÄÔΩôÔΩèÔΩïÔΩí„ÄÄÔΩçÔΩÖÔΩìÔΩìÔΩÅÔΩáÔΩÖ„ÄÄÔΩàÔΩÖÔΩíÔΩÖ..." required></textarea>
            <div class="vapor-actions">
                <a href="{% url 'admin:automation_courtsms_changelist' %}" class="vapor-btn vapor-btn-secondary">‚Üê Ôº¢Ôº°Ôº£Ôº´</a>
                <button type="submit" class="vapor-btn vapor-btn-primary" id="submitBtn">Ôº≥ÔºµÔº¢Ôº≠Ôº©Ôº¥ ‚Üí</button>
            </div>
        </form>
    </div>
    {% if recent_sms %}
    <div class="vapor-history">
        <div class="vapor-history-title">„Äê Ôº≤Ôº•Ôº£Ôº•ÔºÆÔº¥ „Äë</div>
        {% for sms in recent_sms %}
        <a href="{% url 'admin:automation_courtsms_change' sms.id %}" class="vapor-history-item">
            <div class="vapor-status">{% if sms.status == 'completed' %}‚úì{% elif sms.status == 'failed' %}‚úó{% else %}‚óê{% endif %}</div>
            <div class="vapor-info">
                <div class="vapor-text">{{ sms.content|truncatechars:45 }}</div>
                <div class="vapor-meta">#{{ sms.id }} ¬∑ {{ sms.created_at|date:"Y/m/d H:i" }}</div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% endif %}
</div>
<script>
document.getElementById('smsForm').addEventListener('submit', function(e) {
    var ta = document.getElementById('smsContent'), btn = document.getElementById('submitBtn');
    if (!ta.value.trim()) { e.preventDefault(); ta.focus(); return; }
    btn.innerHTML = 'Ôº¨ÔºØÔº°Ôº§Ôº©ÔºÆÔºß...'; btn.disabled = true;
});
</script>
{% endblock %}
